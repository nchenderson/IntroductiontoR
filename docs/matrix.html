<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Matrices | An Introduction to R programming</title>
  <meta name="description" content="Chapter 6 Matrices | An Introduction to R programming" />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Matrices | An Introduction to R programming" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Matrices | An Introduction to R programming" />
  
  
  

<meta name="author" content="Nicholas Henderson" />


<meta name="date" content="2024-09-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="vectors.html"/>
<link rel="next" href="list.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction to R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Getting Started</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#r-and-rstudio"><i class="fa fa-check"></i><b>1.1</b> <span style="color:#D96716"><strong>R</strong></span> and <span style="color:#D96716"><strong>RStudio</strong></span></a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#an-extended-example-the-nyc-flights-data"><i class="fa fa-check"></i><b>1.2</b> An Extended Example: the NYC flights data</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="intro.html"><a href="intro.html#installing-r-packages"><i class="fa fa-check"></i><b>1.2.1</b> Installing R packages</a></li>
<li class="chapter" data-level="1.2.2" data-path="intro.html"><a href="intro.html#nyc-flights-data-details"><i class="fa fa-check"></i><b>1.2.2</b> NYC flights data details</a></li>
<li class="chapter" data-level="1.2.3" data-path="intro.html"><a href="intro.html#summarizing-specific-data-variables"><i class="fa fa-check"></i><b>1.2.3</b> Summarizing specific data variables</a></li>
<li class="chapter" data-level="1.2.4" data-path="intro.html"><a href="intro.html#subsetting-data"><i class="fa fa-check"></i><b>1.2.4</b> Subsetting Data</a></li>
<li class="chapter" data-level="1.2.5" data-path="intro.html"><a href="intro.html#plotting-data"><i class="fa fa-check"></i><b>1.2.5</b> Plotting Data</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#using-r-as-a-calculator"><i class="fa fa-check"></i><b>1.3</b> Using R as a calculator</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#variables-in-r"><i class="fa fa-check"></i><b>1.4</b> Variables in R</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="intro.html"><a href="intro.html#rules-for-choosing-variable-names-in-r"><i class="fa fa-check"></i><b>1.4.1</b> Rules for choosing <strong>variable names</strong> in R</a></li>
<li class="chapter" data-level="1.4.2" data-path="intro.html"><a href="intro.html#variable-assignment"><i class="fa fa-check"></i><b>1.4.2</b> Variable Assignment</a></li>
<li class="chapter" data-level="1.4.3" data-path="intro.html"><a href="intro.html#types-of-variables"><i class="fa fa-check"></i><b>1.4.3</b> Types of variables</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#r-operations-with-numbers"><i class="fa fa-check"></i><b>1.5</b> R Operations with numbers</a></li>
<li class="chapter" data-level="1.6" data-path="intro.html"><a href="intro.html#brief-introduction-to-vectors-in-r"><i class="fa fa-check"></i><b>1.6</b> Brief introduction to vectors in R</a></li>
<li class="chapter" data-level="1.7" data-path="intro.html"><a href="intro.html#writing-comments-in-r"><i class="fa fa-check"></i><b>1.7</b> Writing Comments in R</a></li>
<li class="chapter" data-level="1.8" data-path="intro.html"><a href="intro.html#exercises"><i class="fa fa-check"></i><b>1.8</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>I R Programming Fundamentals</b></span></li>
<li class="chapter" data-level="2" data-path="ifelse.html"><a href="ifelse.html"><i class="fa fa-check"></i><b>2</b> Logical Expressions and If-Else Statements in R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="ifelse.html"><a href="ifelse.html#logical-expression-in-r"><i class="fa fa-check"></i><b>2.1</b> Logical Expression in R</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="ifelse.html"><a href="ifelse.html#comparison-operators"><i class="fa fa-check"></i><b>2.1.1</b> Comparison Operators</a></li>
<li class="chapter" data-level="2.1.2" data-path="ifelse.html"><a href="ifelse.html#logical-operators"><i class="fa fa-check"></i><b>2.1.2</b> Logical Operators</a></li>
<li class="chapter" data-level="2.1.3" data-path="ifelse.html"><a href="ifelse.html#precedence-with-logical-operations"><i class="fa fa-check"></i><b>2.1.3</b> Precedence with logical operations</a></li>
<li class="chapter" data-level="2.1.4" data-path="ifelse.html"><a href="ifelse.html#abbreviating-true-and-false-with-t-and-f"><i class="fa fa-check"></i><b>2.1.4</b> Abbreviating TRUE and FALSE with T and F</a></li>
<li class="chapter" data-level="2.1.5" data-path="ifelse.html"><a href="ifelse.html#examples-of-logical-operations-in-r"><i class="fa fa-check"></i><b>2.1.5</b> Examples of logical operations in R</a></li>
<li class="chapter" data-level="2.1.6" data-path="ifelse.html"><a href="ifelse.html#logical-operators-and-vectors"><i class="fa fa-check"></i><b>2.1.6</b> logical operators and vectors</a></li>
<li class="chapter" data-level="2.1.7" data-path="ifelse.html"><a href="ifelse.html#vs.-and-vs."><i class="fa fa-check"></i><b>2.1.7</b> &amp;&amp; vs. &amp; and || vs. |</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="ifelse.html"><a href="ifelse.html#if-and-if-else-statements"><i class="fa fa-check"></i><b>2.2</b> If and If-else statements</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="ifelse.html"><a href="ifelse.html#if-statements"><i class="fa fa-check"></i><b>2.2.1</b> if statements</a></li>
<li class="chapter" data-level="2.2.2" data-path="ifelse.html"><a href="ifelse.html#if-statement-examples"><i class="fa fa-check"></i><b>2.2.2</b> if statement examples</a></li>
<li class="chapter" data-level="2.2.3" data-path="ifelse.html"><a href="ifelse.html#single-line-if-statements"><i class="fa fa-check"></i><b>2.2.3</b> Single-line if statements</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="ifelse.html"><a href="ifelse.html#if-else-statements"><i class="fa fa-check"></i><b>2.3</b> if-else statements</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="ifelse.html"><a href="ifelse.html#if-else-if-chains"><i class="fa fa-check"></i><b>2.3.1</b> if-else-if chains</a></li>
<li class="chapter" data-level="2.3.2" data-path="ifelse.html"><a href="ifelse.html#nested-if-else-statements"><i class="fa fa-check"></i><b>2.3.2</b> Nested if-else statements</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="ifelse.html"><a href="ifelse.html#the-ifelse-function"><i class="fa fa-check"></i><b>2.4</b> The ifelse function</a></li>
<li class="chapter" data-level="2.5" data-path="ifelse.html"><a href="ifelse.html#exercises-1"><i class="fa fa-check"></i><b>2.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>3</b> Functions in R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="functions.html"><a href="functions.html#built-in-r-functions"><i class="fa fa-check"></i><b>3.1</b> Built-in R functions</a></li>
<li class="chapter" data-level="3.2" data-path="functions.html"><a href="functions.html#construction-your-own-r-functions"><i class="fa fa-check"></i><b>3.2</b> Construction your own R functions</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="functions.html"><a href="functions.html#function-definition-syntax"><i class="fa fa-check"></i><b>3.2.1</b> Function Definition Syntax</a></li>
<li class="chapter" data-level="3.2.2" data-path="functions.html"><a href="functions.html#example-1"><i class="fa fa-check"></i><b>3.2.2</b> Example 1</a></li>
<li class="chapter" data-level="3.2.3" data-path="functions.html"><a href="functions.html#example-2"><i class="fa fa-check"></i><b>3.2.3</b> Example 2</a></li>
<li class="chapter" data-level="3.2.4" data-path="functions.html"><a href="functions.html#rules-for-choosing-function-names"><i class="fa fa-check"></i><b>3.2.4</b> Rules for choosing function names</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="functions.html"><a href="functions.html#default-argument-values-in-functions"><i class="fa fa-check"></i><b>3.3</b> Default argument values in functions</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="functions.html"><a href="functions.html#example-1-1"><i class="fa fa-check"></i><b>3.3.1</b> Example 1</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="functions.html"><a href="functions.html#specifying-function-arguments-with-keywords"><i class="fa fa-check"></i><b>3.4</b> Specifying function arguments with keywords</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="functions.html"><a href="functions.html#example-1-2"><i class="fa fa-check"></i><b>3.4.1</b> Example 1</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="functions.html"><a href="functions.html#more-examples-of-writing-functions"><i class="fa fa-check"></i><b>3.5</b> More Examples of Writing Functions</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="functions.html"><a href="functions.html#example-1-passfail-from-a-weighted-average"><i class="fa fa-check"></i><b>3.5.1</b> Example 1: Pass/Fail from a Weighted Average</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="functions.html"><a href="functions.html#exercises-2"><i class="fa fa-check"></i><b>3.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="loops.html"><a href="loops.html"><i class="fa fa-check"></i><b>4</b> Loops in R</a>
<ul>
<li class="chapter" data-level="4.1" data-path="loops.html"><a href="loops.html#for-loops"><i class="fa fa-check"></i><b>4.1</b> For Loops</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="loops.html"><a href="loops.html#example-1-printing-the-first-5-integers"><i class="fa fa-check"></i><b>4.1.1</b> Example 1: printing the first 5 integers</a></li>
<li class="chapter" data-level="4.1.2" data-path="loops.html"><a href="loops.html#example-2-computing-10-factorial"><i class="fa fa-check"></i><b>4.1.2</b> Example 2: computing 10 factorial</a></li>
<li class="chapter" data-level="4.1.3" data-path="loops.html"><a href="loops.html#example-3-a-non-numeric-looping-variable"><i class="fa fa-check"></i><b>4.1.3</b> Example 3: a non-numeric looping variable</a></li>
<li class="chapter" data-level="4.1.4" data-path="loops.html"><a href="loops.html#example-4-first-fibonacci-numbers"><i class="fa fa-check"></i><b>4.1.4</b> Example 4: first Fibonacci numbers</a></li>
<li class="chapter" data-level="4.1.5" data-path="loops.html"><a href="loops.html#nested-for-loops"><i class="fa fa-check"></i><b>4.1.5</b> Nested for loops</a></li>
<li class="chapter" data-level="4.1.6" data-path="loops.html"><a href="loops.html#break-and-next-exiting-for-loops-and-skipping-iterations"><i class="fa fa-check"></i><b>4.1.6</b> break and next: Exiting for loops and skipping iterations</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="loops.html"><a href="loops.html#while-loops"><i class="fa fa-check"></i><b>4.2</b> While Loops</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="loops.html"><a href="loops.html#example-1-a-first-which-function"><i class="fa fa-check"></i><b>4.2.1</b> Example 1: a “first which” function</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="loops.html"><a href="loops.html#exercises-3"><i class="fa fa-check"></i><b>4.3</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>II R Data Structures</b></span></li>
<li class="chapter" data-level="5" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>5</b> Vectors</a>
<ul>
<li class="chapter" data-level="5.1" data-path="vectors.html"><a href="vectors.html#creating-vectors-in-r"><i class="fa fa-check"></i><b>5.1</b> Creating vectors in R</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="vectors.html"><a href="vectors.html#the-concatenate-function-c"><i class="fa fa-check"></i><b>5.1.1</b> The concatenate function <code>c()</code></a></li>
<li class="chapter" data-level="5.1.2" data-path="vectors.html"><a href="vectors.html#colon-seq-rep-creating-vectors-with-specific-patterns"><i class="fa fa-check"></i><b>5.1.2</b> colon, seq, rep: Creating vectors with specific patterns</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="vectors.html"><a href="vectors.html#subsets-of-vectors"><i class="fa fa-check"></i><b>5.2</b> Subsets of vectors</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="vectors.html"><a href="vectors.html#extracting-vector-elements"><i class="fa fa-check"></i><b>5.2.1</b> Extracting vector elements</a></li>
<li class="chapter" data-level="5.2.2" data-path="vectors.html"><a href="vectors.html#subsetting-with-logical-expressions"><i class="fa fa-check"></i><b>5.2.2</b> Subsetting with logical expressions</a></li>
<li class="chapter" data-level="5.2.3" data-path="vectors.html"><a href="vectors.html#the-which-function"><i class="fa fa-check"></i><b>5.2.3</b> The which function</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="vectors.html"><a href="vectors.html#useful-methods-for-vectors"><i class="fa fa-check"></i><b>5.3</b> Useful methods for vectors</a></li>
<li class="chapter" data-level="5.4" data-path="vectors.html"><a href="vectors.html#vectors-with-different-data-types"><i class="fa fa-check"></i><b>5.4</b> Vectors with different data types</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="vectors.html"><a href="vectors.html#explicitly-changing-the-data-types"><i class="fa fa-check"></i><b>5.4.1</b> Explicitly changing the data types</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="vectors.html"><a href="vectors.html#mathematical-operations-with-vectors"><i class="fa fa-check"></i><b>5.5</b> Mathematical operations with vectors</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="vectors.html"><a href="vectors.html#recycling-rules"><i class="fa fa-check"></i><b>5.5.1</b> Recycling rules</a></li>
<li class="chapter" data-level="5.5.2" data-path="vectors.html"><a href="vectors.html#logical-operations-with-vectors"><i class="fa fa-check"></i><b>5.5.2</b> Logical operations with vectors</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="vectors.html"><a href="vectors.html#set-operations-with-vectors"><i class="fa fa-check"></i><b>5.6</b> Set operations with vectors</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="vectors.html"><a href="vectors.html#the-function-unique"><i class="fa fa-check"></i><b>5.6.1</b> The function unique()</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="vectors.html"><a href="vectors.html#na-and-is.na-missing-values-in-r"><i class="fa fa-check"></i><b>5.7</b> NA and is.na(): missing values in R</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="vectors.html"><a href="vectors.html#the-function-is.na"><i class="fa fa-check"></i><b>5.7.1</b> The function <code>is.na()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="vectors.html"><a href="vectors.html#exercises-4"><i class="fa fa-check"></i><b>5.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="matrix.html"><a href="matrix.html"><i class="fa fa-check"></i><b>6</b> Matrices</a>
<ul>
<li class="chapter" data-level="6.1" data-path="matrix.html"><a href="matrix.html#creating-matrices-in-r"><i class="fa fa-check"></i><b>6.1</b> Creating matrices in R</a></li>
<li class="chapter" data-level="6.2" data-path="matrix.html"><a href="matrix.html#accessing-different-features-of-a-matrix"><i class="fa fa-check"></i><b>6.2</b> Accessing different features of a matrix</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="matrix.html"><a href="matrix.html#accessing-elements-of-a-matrix"><i class="fa fa-check"></i><b>6.2.1</b> Accessing elements of a matrix</a></li>
<li class="chapter" data-level="6.2.2" data-path="matrix.html"><a href="matrix.html#diagonals-of-matrices"><i class="fa fa-check"></i><b>6.2.2</b> Diagonals of Matrices</a></li>
<li class="chapter" data-level="6.2.3" data-path="matrix.html"><a href="matrix.html#naming-rows-or-columns"><i class="fa fa-check"></i><b>6.2.3</b> Naming rows or columns</a></li>
<li class="chapter" data-level="6.2.4" data-path="matrix.html"><a href="matrix.html#combining-rows-or-columns"><i class="fa fa-check"></i><b>6.2.4</b> Combining rows or columns</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="matrix.html"><a href="matrix.html#applying-functions-to-matrices"><i class="fa fa-check"></i><b>6.3</b> Applying functions to matrices</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="matrix.html"><a href="matrix.html#mathematical-operations-with-matrices"><i class="fa fa-check"></i><b>6.3.1</b> Mathematical operations with matrices</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="matrix.html"><a href="matrix.html#matrix-functionals"><i class="fa fa-check"></i><b>6.4</b> Matrix Functionals</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="matrix.html"><a href="matrix.html#functions-applied-to-each-rowcolumn"><i class="fa fa-check"></i><b>6.4.1</b> Functions applied to <strong>each</strong> row/column</a></li>
<li class="chapter" data-level="6.4.2" data-path="matrix.html"><a href="matrix.html#apply-dimension-wise-aggregation"><i class="fa fa-check"></i><b>6.4.2</b> <strong>apply()</strong>: dimension-wise aggregation</a></li>
<li class="chapter" data-level="6.4.3" data-path="matrix.html"><a href="matrix.html#using-apply-with-your-own-function"><i class="fa fa-check"></i><b>6.4.3</b> Using apply with your own function</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="matrix.html"><a href="matrix.html#exercises-5"><i class="fa fa-check"></i><b>6.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="list.html"><a href="list.html"><i class="fa fa-check"></i><b>7</b> Lists</a>
<ul>
<li class="chapter" data-level="7.1" data-path="list.html"><a href="list.html#creating-lists-in-r"><i class="fa fa-check"></i><b>7.1</b> Creating Lists in R</a></li>
<li class="chapter" data-level="7.2" data-path="list.html"><a href="list.html#accessing-list-elements"><i class="fa fa-check"></i><b>7.2</b> Accessing list elements</a></li>
<li class="chapter" data-level="7.3" data-path="list.html"><a href="list.html#working-with-lists"><i class="fa fa-check"></i><b>7.3</b> Working with lists</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="list.html"><a href="list.html#expanding-a-list-adding-more-components"><i class="fa fa-check"></i><b>7.3.1</b> Expanding a list: adding more components</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="list.html"><a href="list.html#when-are-lists-useful"><i class="fa fa-check"></i><b>7.4</b> When are lists useful?</a></li>
<li class="chapter" data-level="7.5" data-path="list.html"><a href="list.html#lapply-and-sapply-applying-functions-to-lists"><i class="fa fa-check"></i><b>7.5</b> lapply() and sapply(): Applying functions to lists</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="list.html"><a href="list.html#use-sapply-for-simpler-output"><i class="fa fa-check"></i><b>7.5.1</b> Use sapply() for simpler output</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="list.html"><a href="list.html#exercises-6"><i class="fa fa-check"></i><b>7.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="dataframe.html"><a href="dataframe.html"><i class="fa fa-check"></i><b>8</b> Data Frames</a>
<ul>
<li class="chapter" data-level="8.1" data-path="dataframe.html"><a href="dataframe.html#creating-data-frames"><i class="fa fa-check"></i><b>8.1</b> Creating Data Frames</a></li>
<li class="chapter" data-level="8.2" data-path="dataframe.html"><a href="dataframe.html#accessing-and-modifying-data-frames"><i class="fa fa-check"></i><b>8.2</b> Accessing and Modifying Data Frames</a></li>
<li class="chapter" data-level="8.3" data-path="dataframe.html"><a href="dataframe.html#subsetting-data-frames"><i class="fa fa-check"></i><b>8.3</b> Subsetting data frames</a></li>
<li class="chapter" data-level="8.4" data-path="dataframe.html"><a href="dataframe.html#exercises-7"><i class="fa fa-check"></i><b>8.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="factors.html"><a href="factors.html"><i class="fa fa-check"></i><b>9</b> Factors</a>
<ul>
<li class="chapter" data-level="9.1" data-path="factors.html"><a href="factors.html#definition-of-factors"><i class="fa fa-check"></i><b>9.1</b> Definition of Factors</a></li>
<li class="chapter" data-level="9.2" data-path="factors.html"><a href="factors.html#adding-new-levels-to-a-factor"><i class="fa fa-check"></i><b>9.2</b> Adding new levels to a factor</a></li>
<li class="chapter" data-level="9.3" data-path="factors.html"><a href="factors.html#the-table-function"><i class="fa fa-check"></i><b>9.3</b> The table() function</a></li>
<li class="chapter" data-level="9.4" data-path="factors.html"><a href="factors.html#tapply-and-aggregate"><i class="fa fa-check"></i><b>9.4</b> tapply() and aggregate</a></li>
</ul></li>
<li class="part"><span><b>III Importing and Organizing Data</b></span></li>
<li class="chapter" data-level="10" data-path="fileinput.html"><a href="fileinput.html"><i class="fa fa-check"></i><b>10</b> Reading Data Files into R</a>
<ul>
<li class="chapter" data-level="10.1" data-path="fileinput.html"><a href="fileinput.html#downloading-a-file-locally"><i class="fa fa-check"></i><b>10.1</b> Downloading a file locally</a></li>
<li class="chapter" data-level="10.2" data-path="fileinput.html"><a href="fileinput.html#opening-a-remote-file-using-read.table"><i class="fa fa-check"></i><b>10.2</b> Opening a remote file using read.table()</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="datawrangling.html"><a href="datawrangling.html"><i class="fa fa-check"></i><b>11</b> Data Wrangling</a>
<ul>
<li class="chapter" data-level="11.1" data-path="datawrangling.html"><a href="datawrangling.html#the-nycflights13-data"><i class="fa fa-check"></i><b>11.1</b> The nycflights13 data</a></li>
<li class="chapter" data-level="11.2" data-path="datawrangling.html"><a href="datawrangling.html#exploring-the-dataset"><i class="fa fa-check"></i><b>11.2</b> Exploring the Dataset</a></li>
<li class="chapter" data-level="11.3" data-path="datawrangling.html"><a href="datawrangling.html#summarizing-each-variable"><i class="fa fa-check"></i><b>11.3</b> Summarizing each variable</a></li>
<li class="chapter" data-level="11.4" data-path="datawrangling.html"><a href="datawrangling.html#using-the-dplyr-package"><i class="fa fa-check"></i><b>11.4</b> Using the dplyr package</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An Introduction to R programming</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="matrix" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Chapter 6</span> Matrices<a href="matrix.html#matrix" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<ul>
<li><p>A <strong>matrix</strong> is a table of data organized into <strong>rows</strong> and <strong>columns</strong>.
<span class="math display">\[\begin{equation}
\mathbf{A} = \begin{bmatrix} a_{11} &amp; a_{12} &amp; \ldots &amp; a_{1p} \\
a_{21} &amp; a_{22} &amp; \ldots &amp; a_{2p} \\
\vdots &amp; \vdots &amp; \ddots &amp; \vdots \\
a_{n1} &amp; a_{12} &amp; \ldots &amp; a_{np}
\end{bmatrix} \nonumber
\end{equation}\]</span></p></li>
<li><p>The matrix <span class="math inline">\(\mathbf{A}\)</span> has <span class="math inline">\(n\)</span> rows and <span class="math inline">\(p\)</span> columns.</p></li>
<li><p>The matrix element <span class="math inline">\(a_{ij}\)</span> represents the number in the <span class="math inline">\(i^{th}\)</span> row and <span class="math inline">\(j^{th}\)</span> column.</p></li>
<li><p><strong>R</strong> allows the elements of a matrix to be <strong>any type</strong>.</p></li>
<li><p>As with vectors, the <strong>elements</strong> of a matrix in <strong>R</strong> must all have the <strong>same type</strong>.</p></li>
</ul>
<div id="creating-matrices-in-r" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Creating matrices in R<a href="matrix.html#creating-matrices-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p>The most common way to create a matrix is
with the <strong>matrix</strong> function.</p></li>
<li><p>The form of the <strong>matrix</strong> function is</p></li>
</ul>
<div class="sourceCode" id="cb467"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb467-1"><a href="matrix.html#cb467-1" tabindex="-1"></a><span class="fu">matrix</span>(x, nrow, ncol)</span></code></pre></div>
<ul>
<li><strong>x</strong> is a <strong>vector</strong> that you want to convert into a matrix.
<ul>
<li><p><code>nrow</code> is the number of rows you want the matrix to have.</p></li>
<li><p><code>ncol</code> is the number of columns you want the matrix to have.</p></li>
<li><p><code>x</code> could be a single number (a vector of length one) in which
case the returned matrix will have all the same entries.</p></li>
</ul></li>
<li>If we wanted to create a matrix named <code>A</code> with <strong>2 rows</strong> and <strong>3 columns</strong> that contains
<strong>only zeros</strong>, we could use the following code</li>
</ul>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb468-1"><a href="matrix.html#cb468-1" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">3</span>) </span>
<span id="cb468-2"><a href="matrix.html#cb468-2" tabindex="-1"></a>A</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    0    0    0
## [2,]    0    0    0</code></pre>
<ul>
<li><p>To <strong>convert</strong> a vector into a matrix</p></li>
<li><p><strong>Convert</strong> the vector (1, 2, 3, 4, 5, 6) into a matrix with 2 rows and 3 columns</p></li>
</ul>
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb470-1"><a href="matrix.html#cb470-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>     <span class="co"># x is a vector of 1,2,3,4,5,6 </span></span>
<span id="cb470-2"><a href="matrix.html#cb470-2" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="fu">matrix</span>(x, <span class="dv">2</span>, <span class="dv">3</span>) <span class="co"># create a matrix from this vector</span></span>
<span id="cb470-3"><a href="matrix.html#cb470-3" tabindex="-1"></a>B</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<ul>
<li>Notice that <strong>matrix</strong> function fills in the matrix entries by columns (i.e, it fills in the numbers from <code>x</code> in the first column, then moves to the second, etc.)
<ul>
<li>This is referred to as filling in the entries “<strong>by column</strong>”</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb472-1"><a href="matrix.html#cb472-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>     <span class="co"># x is a vector of 1,2,3,4,5,6 </span></span>
<span id="cb472-2"><a href="matrix.html#cb472-2" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="fu">matrix</span>(x, <span class="dv">2</span>, <span class="dv">3</span>) <span class="co"># create a matrix from this vector</span></span>
<span id="cb472-3"><a href="matrix.html#cb472-3" tabindex="-1"></a>B</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<ul>
<li>You can instead fill in the matrix entries <strong>by rows</strong> by using the <strong>keyword</strong> argument <code>byrow = TRUE</code></li>
</ul>
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb474-1"><a href="matrix.html#cb474-1" tabindex="-1"></a>D <span class="ot">&lt;-</span> <span class="fu">matrix</span>(x, <span class="dv">2</span>, <span class="dv">3</span>, <span class="at">byrow=</span><span class="cn">TRUE</span>)</span>
<span id="cb474-2"><a href="matrix.html#cb474-2" tabindex="-1"></a>D</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    5    6</code></pre>
<hr />
<ul>
<li>It is often useful to create a matrix which has <strong>all the same</strong> columns (or rows):</li>
</ul>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="matrix.html#cb476-1" tabindex="-1"></a><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>) <span class="co"># duplicates the column vector c(1,2)</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    1    1
## [2,]    2    2    2</code></pre>
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb478-1"><a href="matrix.html#cb478-1" tabindex="-1"></a><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">3</span>) <span class="co"># this does not duplicate the row vector c(1,2,3)</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    2
## [2,]    2    1    3</code></pre>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb480-1"><a href="matrix.html#cb480-1" tabindex="-1"></a><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="at">byrow=</span><span class="cn">TRUE</span>) <span class="co"># but this one does!</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    1    2    3</code></pre>
</div>
<div id="accessing-different-features-of-a-matrix" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Accessing different features of a matrix<a href="matrix.html#accessing-different-features-of-a-matrix" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="accessing-elements-of-a-matrix" class="section level3 hasAnchor" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> Accessing elements of a matrix<a href="matrix.html#accessing-elements-of-a-matrix" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>To access the <span class="math inline">\((i,j)\)</span> <strong>element</strong> of a matrix <code>A</code>, use the syntax <code>A[i,j]</code></p></li>
<li><p>As an example of this, let’s create a <span class="math inline">\(2 \times 3\)</span> matrix <code>A</code> and look at the <span class="math inline">\((2,1)\)</span> element of <code>A</code>:</p></li>
</ul>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb482-1"><a href="matrix.html#cb482-1" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="at">byrow=</span><span class="cn">TRUE</span>) <span class="co"># creating a 2x3 matrix</span></span>
<span id="cb482-2"><a href="matrix.html#cb482-2" tabindex="-1"></a>A                         <span class="co"># print the matrix</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    5    6</code></pre>
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb484-1"><a href="matrix.html#cb484-1" tabindex="-1"></a>A[<span class="dv">2</span>,<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<ul>
<li><p>You can access different subsets of a matrix by using vectors of indeces rather than single numbers in the indexing bracket.</p></li>
<li><p>For example, if you want to look at elements <span class="math inline">\((2, 1)\)</span> and <span class="math inline">\((2,2)\)</span> of <code>A</code>, you can use the following syntax:</p></li>
</ul>
<div class="sourceCode" id="cb486"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb486-1"><a href="matrix.html#cb486-1" tabindex="-1"></a>A[<span class="dv">2</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] 4 5</code></pre>
<ul>
<li>Similarly, if you want to access all elements of <code>A</code> in either the first two rows or first two columns of <code>A</code>, you can use the following syntax:</li>
</ul>
<div class="sourceCode" id="cb488"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb488-1"><a href="matrix.html#cb488-1" tabindex="-1"></a>A[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    2
## [2,]    4    5</code></pre>
<ul>
<li>To access the entire <strong>kth column</strong> of <code>A</code>, use the syntax <code>A[,k]</code>.
<ul>
<li>To access the entire <strong>kth row</strong> of <code>A</code>, use the syntax <code>A[k,]</code></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb490-1"><a href="matrix.html#cb490-1" tabindex="-1"></a>A[,<span class="dv">2</span>]  <span class="do">## access 2nd column of A</span></span></code></pre></div>
<pre><code>## [1] 2 5</code></pre>
<hr />
<ul>
<li>Using <strong>nrow()</strong> or <strong>ncol()</strong> let you see the number of
<strong>rows</strong> or <strong>columns</strong> of a matrix.</li>
</ul>
<div class="sourceCode" id="cb492"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb492-1"><a href="matrix.html#cb492-1" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="at">byrow=</span><span class="cn">TRUE</span>) <span class="co"># creating a 2x3 matrix</span></span>
<span id="cb492-2"><a href="matrix.html#cb492-2" tabindex="-1"></a></span>
<span id="cb492-3"><a href="matrix.html#cb492-3" tabindex="-1"></a><span class="fu">nrow</span>(A)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb494"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb494-1"><a href="matrix.html#cb494-1" tabindex="-1"></a><span class="fu">ncol</span>(A)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<ul>
<li><strong>dim</strong> will return <strong>both</strong> the number of rows and columns.</li>
</ul>
<div class="sourceCode" id="cb496"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb496-1"><a href="matrix.html#cb496-1" tabindex="-1"></a><span class="fu">dim</span>(A)</span></code></pre></div>
<pre><code>## [1] 2 3</code></pre>
<hr />
<ul>
<li><p>While using the <code>A[i,j]</code> syntax is a more typical way of accessing specific elements of a matrix, you can <strong>also</strong> access the elements of a matrix as you would with a <strong>vector</strong>.</p></li>
<li><p>For a matrix, the indexing increases <strong>by column</strong></p>
<ul>
<li>For example, if <code>A</code> has 3 rows:</li>
<li><code>A[1]=A[1,1]</code>, <code>A[2]=A[2,1]</code>, <code>A[3]=A[3,1]</code>, <code>A[4]=A[1,2]</code>, …</li>
</ul></li>
<li><p>For example if we access the “4th” and “5th” elements of a <span class="math inline">\(2 x 3\)</span>
matrix</p></li>
</ul>
<div class="sourceCode" id="cb498"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb498-1"><a href="matrix.html#cb498-1" tabindex="-1"></a>A </span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    5    6</code></pre>
<div class="sourceCode" id="cb500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb500-1"><a href="matrix.html#cb500-1" tabindex="-1"></a>A[<span class="dv">4</span><span class="sc">:</span><span class="dv">5</span>]          <span class="do">## accessing like a one-dimensional vector</span></span></code></pre></div>
<pre><code>## [1] 5 3</code></pre>
<ul>
<li>I don’t really use this way of accessing matrix elements much though,
in some cases, it is more convenient (e.g., <code>A[ which(A &gt; 3) ]</code>)</li>
</ul>
<hr />
<ul>
<li>You can also access elements of a matrix <strong>like a vector</strong> using <strong>logical subsetting</strong></li>
</ul>
<div class="sourceCode" id="cb502"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb502-1"><a href="matrix.html#cb502-1" tabindex="-1"></a><span class="fu">which</span>( A <span class="sc">&gt;</span> <span class="dv">3</span>)      <span class="do">## getting indices with which</span></span></code></pre></div>
<pre><code>## [1] 2 4 6</code></pre>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb504-1"><a href="matrix.html#cb504-1" tabindex="-1"></a>A[ <span class="fu">which</span>(A<span class="sc">&gt;</span><span class="dv">3</span>) ]   <span class="do">## getting the elements greater than 3</span></span></code></pre></div>
<pre><code>## [1] 4 5 6</code></pre>
</div>
<div id="diagonals-of-matrices" class="section level3 hasAnchor" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> Diagonals of Matrices<a href="matrix.html#diagonals-of-matrices" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>The <strong>diagonals</strong> of a matrix are the elements of the matrix where
the <strong>row index</strong> equals the <strong>column index</strong>.</p></li>
<li><p>In a <strong>diagonal matrix</strong>, all <strong>non-diagonal</strong> elements must be zero.</p></li>
<li><p>To create a <strong>diagonal</strong> matrix in <strong>R</strong>, use the <code>diag</code> function.</p>
<ul>
<li>You must provide the vector of <strong>diagonal elements</strong> as the input to <code>diag</code></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb506-1"><a href="matrix.html#cb506-1" tabindex="-1"></a><span class="fu">diag</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)   <span class="co"># 4x4 diagonal matrix with (1,2,3,4) as diagonals</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    1    0    0    0
## [2,]    0    2    0    0
## [3,]    0    0    3    0
## [4,]    0    0    0    4</code></pre>
<ul>
<li>If you use <code>diag(A)</code> where the <strong>input</strong> argument <code>A</code> is a <strong>matrix</strong>, this
will return the <strong>diagonal elements</strong> of <code>A</code>.</li>
</ul>
<div class="sourceCode" id="cb508"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb508-1"><a href="matrix.html#cb508-1" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb508-2"><a href="matrix.html#cb508-2" tabindex="-1"></a>A</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9</code></pre>
<div class="sourceCode" id="cb510"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb510-1"><a href="matrix.html#cb510-1" tabindex="-1"></a><span class="fu">diag</span>(A)   <span class="co"># returns diagonals of this matrix</span></span></code></pre></div>
<pre><code>## [1] 1 5 9</code></pre>
<hr />
<ul>
<li><p>Working with <strong>off-diagonal</strong> elements.</p></li>
<li><p>The function <code>upper.tri(A)</code> returns a <strong>logical matrix</strong> of the same dimension as <code>A</code> with <code>TRUE</code> values on the “upper diagonal” part of the matrix.</p>
<ul>
<li>Thus, you can use <code>upper.tri</code> to update the upper diagonal parts of a matrix.</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb512"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb512-1"><a href="matrix.html#cb512-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb512-2"><a href="matrix.html#cb512-2" tabindex="-1"></a>x[<span class="fu">upper.tri</span>(x)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb512-3"><a href="matrix.html#cb512-3" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    0    0
## [2,]    2    5    0
## [3,]    3    6    9</code></pre>
<ul>
<li>Similarly, <code>lower.tri(A)</code> allows you to look at the subset of entries on the “lower diagonal” part of a matrix.</li>
</ul>
<div class="sourceCode" id="cb514"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb514-1"><a href="matrix.html#cb514-1" tabindex="-1"></a>x[<span class="fu">lower.tri</span>(x,<span class="at">diag=</span><span class="cn">TRUE</span>)] <span class="ot">&lt;-</span> <span class="dv">10</span><span class="sc">:</span><span class="dv">15</span></span>
<span id="cb514-2"><a href="matrix.html#cb514-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]   10    0    0
## [2,]   11   13    0
## [3,]   12   14   15</code></pre>
</div>
<div id="naming-rows-or-columns" class="section level3 hasAnchor" number="6.2.3">
<h3><span class="header-section-number">6.2.3</span> Naming rows or columns<a href="matrix.html#naming-rows-or-columns" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>You can give a name to each row with the <strong>rownames</strong> function.
<ul>
<li>The collection of <strong>row names</strong> of a matrix should be a <strong>vector</strong>.</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb516"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb516-1"><a href="matrix.html#cb516-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">nrow=</span><span class="dv">2</span>, <span class="at">ncol=</span><span class="dv">3</span>)</span>
<span id="cb516-2"><a href="matrix.html#cb516-2" tabindex="-1"></a><span class="fu">rownames</span>(x) <span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>)</span>
<span id="cb516-3"><a href="matrix.html#cb516-3" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##   [,1] [,2] [,3]
## a    1    3    5
## b    2    4    6</code></pre>
<ul>
<li>You can actually access rows of a matrix <strong>by name</strong>:</li>
</ul>
<div class="sourceCode" id="cb518"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb518-1"><a href="matrix.html#cb518-1" tabindex="-1"></a>x[<span class="dv">1</span>,] </span></code></pre></div>
<pre><code>## [1] 1 3 5</code></pre>
<div class="sourceCode" id="cb520"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb520-1"><a href="matrix.html#cb520-1" tabindex="-1"></a><span class="fu">rownames</span>(x) <span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>)</span>
<span id="cb520-2"><a href="matrix.html#cb520-2" tabindex="-1"></a>x[<span class="st">&quot;a&quot;</span>,]</span></code></pre></div>
<pre><code>## [1] 1 3 5</code></pre>
<ul>
<li>Similarly, you can access <strong>columns</strong> of a matrix <strong>by name</strong>:</li>
</ul>
<div class="sourceCode" id="cb522"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb522-1"><a href="matrix.html#cb522-1" tabindex="-1"></a><span class="fu">colnames</span>(x) <span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;c1&quot;</span>,<span class="st">&quot;c2&quot;</span>,<span class="st">&quot;c3&quot;</span>) </span>
<span id="cb522-2"><a href="matrix.html#cb522-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##   c1 c2 c3
## a  1  3  5
## b  2  4  6</code></pre>
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb524-1"><a href="matrix.html#cb524-1" tabindex="-1"></a>x[<span class="dv">2</span>, <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)]</span></code></pre></div>
<pre><code>## c2 c3 
##  4  6</code></pre>
<div class="sourceCode" id="cb526"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb526-1"><a href="matrix.html#cb526-1" tabindex="-1"></a>x[<span class="st">&quot;b&quot;</span>, <span class="fu">c</span>(<span class="st">&quot;c2&quot;</span>,<span class="st">&quot;c3&quot;</span>)]</span></code></pre></div>
<pre><code>## c2 c3 
##  4  6</code></pre>
</div>
<div id="combining-rows-or-columns" class="section level3 hasAnchor" number="6.2.4">
<h3><span class="header-section-number">6.2.4</span> Combining rows or columns<a href="matrix.html#combining-rows-or-columns" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>You can <strong>“join”</strong> matrices in “vertical” or “horizontal” ways
by using the functions
<ul>
<li><code>cbind</code> (<strong>column</strong> bind)</li>
<li><code>rbind</code> (<strong>row</strong> bind)</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb528"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb528-1"><a href="matrix.html#cb528-1" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb528-2"><a href="matrix.html#cb528-2" tabindex="-1"></a>Y <span class="ot">&lt;-</span> X<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb528-3"><a href="matrix.html#cb528-3" tabindex="-1"></a><span class="fu">cbind</span>(X,Y)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6]
## [1,]    1    3    5    1    9   25
## [2,]    2    4    6    4   16   36</code></pre>
<div class="sourceCode" id="cb530"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb530-1"><a href="matrix.html#cb530-1" tabindex="-1"></a><span class="fu">rbind</span>(X,Y)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6
## [3,]    1    9   25
## [4,]    4   16   36</code></pre>
</div>
</div>
<div id="applying-functions-to-matrices" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Applying functions to matrices<a href="matrix.html#applying-functions-to-matrices" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p>You can directly use <strong>matrices</strong> as input arguments with many of the widely-used built-in <strong>R</strong> functions.</p></li>
<li><p>Functions like <strong>sum</strong> or <strong>mean</strong> will
take the sum (or average) of <strong>all</strong>
the elements of a matrix:</p></li>
</ul>
<div class="sourceCode" id="cb532"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb532-1"><a href="matrix.html#cb532-1" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb532-2"><a href="matrix.html#cb532-2" tabindex="-1"></a><span class="fu">sum</span>(A)  <span class="co"># sum of all elements</span></span></code></pre></div>
<pre><code>## [1] 21</code></pre>
<div class="sourceCode" id="cb534"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb534-1"><a href="matrix.html#cb534-1" tabindex="-1"></a><span class="fu">mean</span>(A) <span class="co"># average of all elements</span></span></code></pre></div>
<pre><code>## [1] 3.5</code></pre>
<div class="sourceCode" id="cb536"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb536-1"><a href="matrix.html#cb536-1" tabindex="-1"></a><span class="fu">sd</span>(A)   <span class="co"># standard deviation of all elements</span></span></code></pre></div>
<pre><code>## [1] 1.870829</code></pre>
<ul>
<li>You can take the <strong>transpose</strong> of a matrix <code>A</code> using <code>t(A)</code>.
<ul>
<li>You can <strong>convert</strong> a matrix <code>A</code> into a vector using <code>as.vector(A)</code> or simply <code>c(A)</code>.</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb538"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb538-1"><a href="matrix.html#cb538-1" tabindex="-1"></a>A</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<div class="sourceCode" id="cb540"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb540-1"><a href="matrix.html#cb540-1" tabindex="-1"></a><span class="fu">t</span>(A)             <span class="do">## transpose of A (reverse role of rows/columns)</span></span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    2
## [2,]    3    4
## [3,]    5    6</code></pre>
<div class="sourceCode" id="cb542"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb542-1"><a href="matrix.html#cb542-1" tabindex="-1"></a><span class="fu">as.vector</span>( A )   <span class="do">## convert matrix to vector in column-wise order</span></span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5 6</code></pre>
<div class="sourceCode" id="cb544"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb544-1"><a href="matrix.html#cb544-1" tabindex="-1"></a><span class="fu">as.vector</span>( <span class="fu">t</span>(A) ) <span class="do">## convert matrix to vector in row-wise order</span></span></code></pre></div>
<pre><code>## [1] 1 3 5 2 4 6</code></pre>
<div id="mathematical-operations-with-matrices" class="section level3 hasAnchor" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> Mathematical operations with matrices<a href="matrix.html#mathematical-operations-with-matrices" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Using <code>+,-,*,/</code> with two matrices performs <strong>element-wise</strong> addition,
subtraction, multiplication, and division.</li>
</ul>
<div class="sourceCode" id="cb546"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb546-1"><a href="matrix.html#cb546-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="at">byrow=</span><span class="cn">TRUE</span>)   </span>
<span id="cb546-2"><a href="matrix.html#cb546-2" tabindex="-1"></a>x <span class="sc">+</span> y  <span class="co"># matrix addition (element-by-element)</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    2    4    6
## [2,]    8   10   12</code></pre>
<div class="sourceCode" id="cb548"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb548-1"><a href="matrix.html#cb548-1" tabindex="-1"></a>x <span class="sc">-</span> y  <span class="co"># matrix subtraction (element-by-element)</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    0    0    0
## [2,]    0    0    0</code></pre>
<div class="sourceCode" id="cb550"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb550-1"><a href="matrix.html#cb550-1" tabindex="-1"></a>x<span class="sc">*</span>y  <span class="co"># element-wise multiplication</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    4    9
## [2,]   16   25   36</code></pre>
<ul>
<li><p>Note that <code>A*B</code> <strong>does not</strong> perform true matrix multiplication of matrices <code>A</code> and <code>B</code>.</p></li>
<li><p>Matrix multiplication is done with <code>%*%</code></p></li>
</ul>
<div class="sourceCode" id="cb552"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb552-1"><a href="matrix.html#cb552-1" tabindex="-1"></a>x <span class="sc">%*%</span> <span class="fu">t</span>(y)  <span class="co"># (2x3) x (3x2) matrix</span></span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]   14   32
## [2,]   32   77</code></pre>
<div class="sourceCode" id="cb554"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb554-1"><a href="matrix.html#cb554-1" tabindex="-1"></a><span class="fu">t</span>(x) <span class="sc">%*%</span> y  <span class="co"># (3x2) x (2x3) matrix</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]   17   22   27
## [2,]   22   29   36
## [3,]   27   36   45</code></pre>
</div>
</div>
<div id="matrix-functionals" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> Matrix Functionals<a href="matrix.html#matrix-functionals" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="functions-applied-to-each-rowcolumn" class="section level3 hasAnchor" number="6.4.1">
<h3><span class="header-section-number">6.4.1</span> Functions applied to <strong>each</strong> row/column<a href="matrix.html#functions-applied-to-each-rowcolumn" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>We can take the <strong>sum</strong> or <strong>mean</strong> of each row/column of a matrix by using either <code>rowSums</code>, <code>rowMeans</code>, <code>colSums</code>, or <code>colMeans</code>.</li>
</ul>
<div class="sourceCode" id="cb556"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb556-1"><a href="matrix.html#cb556-1" tabindex="-1"></a>A</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<div class="sourceCode" id="cb558"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb558-1"><a href="matrix.html#cb558-1" tabindex="-1"></a><span class="fu">rowSums</span>(A)</span></code></pre></div>
<pre><code>## [1]  9 12</code></pre>
<div class="sourceCode" id="cb560"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb560-1"><a href="matrix.html#cb560-1" tabindex="-1"></a><span class="fu">colSums</span>(A)</span></code></pre></div>
<pre><code>## [1]  3  7 11</code></pre>
<div class="sourceCode" id="cb562"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb562-1"><a href="matrix.html#cb562-1" tabindex="-1"></a><span class="fu">rowMeans</span>(A)</span></code></pre></div>
<pre><code>## [1] 3 4</code></pre>
<ul>
<li>While <code>rowSums</code> works perfectly fine, let’s try writing our own <strong>rowSums()</strong> function:</li>
</ul>
<div class="sourceCode" id="cb564"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb564-1"><a href="matrix.html#cb564-1" tabindex="-1"></a>myRowSums <span class="ot">&lt;-</span><span class="cf">function</span>(x){</span>
<span id="cb564-2"><a href="matrix.html#cb564-2" tabindex="-1"></a>  ret <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="cn">NA</span>,<span class="fu">nrow</span>(x)) <span class="do">## make an empty vector</span></span>
<span id="cb564-3"><a href="matrix.html#cb564-3" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(x)) {</span>
<span id="cb564-4"><a href="matrix.html#cb564-4" tabindex="-1"></a>    ret[i] <span class="ot">&lt;-</span><span class="fu">sum</span>(x[i,])  <span class="do">## take the sum of i-th row</span></span>
<span id="cb564-5"><a href="matrix.html#cb564-5" tabindex="-1"></a>  }</span>
<span id="cb564-6"><a href="matrix.html#cb564-6" tabindex="-1"></a>  <span class="fu">return</span> (ret)</span>
<span id="cb564-7"><a href="matrix.html#cb564-7" tabindex="-1"></a>}</span>
<span id="cb564-8"><a href="matrix.html#cb564-8" tabindex="-1"></a><span class="fu">rowSums</span>(A)</span></code></pre></div>
<pre><code>## [1]  9 12</code></pre>
<div class="sourceCode" id="cb566"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb566-1"><a href="matrix.html#cb566-1" tabindex="-1"></a><span class="fu">myRowSums</span>(A)</span></code></pre></div>
<pre><code>## [1]  9 12</code></pre>
<ul>
<li><p>The implementation by the function <code>myRowSums</code> works fine.</p></li>
<li><p>However, it is a bit cumbersome to write such a function
whenever we want to compute <strong>column-wise/row-wise</strong> summary statistics.</p></li>
<li><p>It would be nice if there were a <strong>quick &amp; general</strong> way to do the following:</p>
<ul>
<li>For <strong>each</strong> row or column of a matrix …</li>
<li>Evaluate a <strong>function</strong> using the row/column vector as input</li>
<li>Return the collection of results as a <strong>numeric vector</strong>.</li>
</ul></li>
</ul>
</div>
<div id="apply-dimension-wise-aggregation" class="section level3 hasAnchor" number="6.4.2">
<h3><span class="header-section-number">6.4.2</span> <strong>apply()</strong>: dimension-wise aggregation<a href="matrix.html#apply-dimension-wise-aggregation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb568"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb568-1"><a href="matrix.html#cb568-1" tabindex="-1"></a><span class="fu">rowSums</span>(A)    <span class="do">## original row-wise sum</span></span></code></pre></div>
<pre><code>## [1]  9 12</code></pre>
<div class="sourceCode" id="cb570"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb570-1"><a href="matrix.html#cb570-1" tabindex="-1"></a><span class="fu">apply</span>(A, <span class="dv">1</span>, sum) <span class="do">## this also performs row-wise sum</span></span></code></pre></div>
<pre><code>## [1]  9 12</code></pre>
<div class="sourceCode" id="cb572"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb572-1"><a href="matrix.html#cb572-1" tabindex="-1"></a><span class="fu">colSums</span>(A)    <span class="do">## original column-wise sum</span></span></code></pre></div>
<pre><code>## [1]  3  7 11</code></pre>
<div class="sourceCode" id="cb574"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb574-1"><a href="matrix.html#cb574-1" tabindex="-1"></a><span class="fu">apply</span>(A, <span class="dv">2</span>, sum) <span class="do">## this also performs column-wise sum</span></span></code></pre></div>
<pre><code>## [1]  3  7 11</code></pre>
<ul>
<li><p><strong>First parameter</strong> of apply: the <strong>input matrix</strong>.</p></li>
<li><p><strong>Second parameter</strong> of apply: the <strong>dimension</strong> over which to aggregate</p>
<ul>
<li>1:rows, 2:columns</li>
</ul></li>
<li><p><strong>Third parameter</strong> of apply: <strong>function</strong> to evaluate for each row/column</p></li>
</ul>
<div class="sourceCode" id="cb576"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb576-1"><a href="matrix.html#cb576-1" tabindex="-1"></a>A</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<div class="sourceCode" id="cb578"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb578-1"><a href="matrix.html#cb578-1" tabindex="-1"></a><span class="fu">apply</span>(A, <span class="dv">1</span>, sum)  <span class="co"># row sums</span></span></code></pre></div>
<pre><code>## [1]  9 12</code></pre>
<div class="sourceCode" id="cb580"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb580-1"><a href="matrix.html#cb580-1" tabindex="-1"></a><span class="fu">apply</span>(A, <span class="dv">2</span>, sum)  <span class="co"># column sums</span></span></code></pre></div>
<pre><code>## [1]  3  7 11</code></pre>
<ul>
<li>Examples of using apply:</li>
</ul>
<div class="sourceCode" id="cb582"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb582-1"><a href="matrix.html#cb582-1" tabindex="-1"></a><span class="fu">colMeans</span>(A)  <span class="do">## original columnw-wise mean</span></span></code></pre></div>
<pre><code>## [1] 1.5 3.5 5.5</code></pre>
<div class="sourceCode" id="cb584"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb584-1"><a href="matrix.html#cb584-1" tabindex="-1"></a><span class="fu">apply</span>(A, <span class="dv">2</span>, mean) <span class="do">## same as above</span></span></code></pre></div>
<pre><code>## [1] 1.5 3.5 5.5</code></pre>
<div class="sourceCode" id="cb586"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb586-1"><a href="matrix.html#cb586-1" tabindex="-1"></a><span class="co"># colMax(A)   ## This will cause ERROR. colmax() does not exist!</span></span>
<span id="cb586-2"><a href="matrix.html#cb586-2" tabindex="-1"></a><span class="fu">apply</span>(A, <span class="dv">2</span>, max) <span class="do">## But this works!</span></span></code></pre></div>
<pre><code>## [1] 2 4 6</code></pre>
</div>
<div id="using-apply-with-your-own-function" class="section level3 hasAnchor" number="6.4.3">
<h3><span class="header-section-number">6.4.3</span> Using apply with your own function<a href="matrix.html#using-apply-with-your-own-function" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>Suppose that instead of simply taking the row-wise or column-wise means we want to do the following:</p></li>
<li><p>For <strong>each</strong> row/column:</p>
<ul>
<li>Calculate the squared sum of each row/column.</li>
<li>Return the vector of squared sums.</li>
</ul></li>
<li><p>How can we do this using <strong>apply()</strong>?</p></li>
</ul>
<hr />
<ul>
<li><p>A <strong>big</strong> advantage of the <strong>apply</strong> function is the
<strong>flexibility</strong> it gives you.</p></li>
<li><p>You can use <strong>your own</strong> functions to compute <strong>row-wise/column-wise summary measures</strong> for certain measures that may not be implemented in base <strong>R</strong>.</p></li>
</ul>
<div class="sourceCode" id="cb588"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb588-1"><a href="matrix.html#cb588-1" tabindex="-1"></a><span class="do">## define a function named sqsum</span></span>
<span id="cb588-2"><a href="matrix.html#cb588-2" tabindex="-1"></a>sqsum <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb588-3"><a href="matrix.html#cb588-3" tabindex="-1"></a>  <span class="fu">return</span>( <span class="fu">sum</span>(x<span class="sc">*</span>x) )  <span class="do">## very simple implementation</span></span>
<span id="cb588-4"><a href="matrix.html#cb588-4" tabindex="-1"></a>}</span>
<span id="cb588-5"><a href="matrix.html#cb588-5" tabindex="-1"></a><span class="fu">apply</span>(A, <span class="dv">1</span>, sqsum)    <span class="do">## run sqsum() funciton</span></span></code></pre></div>
<pre><code>## [1] 35 56</code></pre>
<hr />
<ul>
<li><p>You can actually write the function definition <strong>inside</strong>
of the apply function.</p></li>
<li><p>This can be convenient when using straightforward functions that can be written on a single line:</p></li>
</ul>
<div class="sourceCode" id="cb590"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb590-1"><a href="matrix.html#cb590-1" tabindex="-1"></a><span class="fu">apply</span>(A, <span class="dv">1</span>, <span class="cf">function</span>(x) {<span class="fu">return</span> (<span class="fu">sum</span>(x<span class="sc">*</span>x))} )    <span class="do">## much simpler!</span></span></code></pre></div>
<pre><code>## [1] 35 56</code></pre>
<ul>
<li>Or, we can write the above apply statement in an even simpler form:</li>
</ul>
<div class="sourceCode" id="cb592"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb592-1"><a href="matrix.html#cb592-1" tabindex="-1"></a><span class="do">## You can omit return() and {} especially </span></span>
<span id="cb592-2"><a href="matrix.html#cb592-2" tabindex="-1"></a><span class="do">## for simple function definitions</span></span>
<span id="cb592-3"><a href="matrix.html#cb592-3" tabindex="-1"></a><span class="fu">apply</span>(A, <span class="dv">1</span>, <span class="cf">function</span>(x) <span class="fu">sum</span>(x<span class="sc">*</span>x) )    <span class="do">## Even simpler!</span></span></code></pre></div>
<pre><code>## [1] 35 56</code></pre>
<hr />
<ul>
<li><strong>apply()</strong> can also return a <strong>matrix</strong></li>
</ul>
<div class="sourceCode" id="cb594"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb594-1"><a href="matrix.html#cb594-1" tabindex="-1"></a><span class="do">## if apply() returns a vector, each row stores results</span></span>
<span id="cb594-2"><a href="matrix.html#cb594-2" tabindex="-1"></a><span class="fu">apply</span>(A, <span class="dv">1</span>, <span class="cf">function</span>(x) <span class="fu">c</span>(<span class="fu">min</span>(x),<span class="fu">max</span>(x)) )</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    2
## [2,]    5    6</code></pre>
<div class="sourceCode" id="cb596"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb596-1"><a href="matrix.html#cb596-1" tabindex="-1"></a><span class="fu">apply</span>(A, <span class="dv">2</span>, <span class="cf">function</span>(x) <span class="fu">c</span>(<span class="fu">min</span>(x),<span class="fu">max</span>(x)) )</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
</div>
</div>
<div id="exercises-5" class="section level2 hasAnchor" number="6.5">
<h2><span class="header-section-number">6.5</span> Exercises<a href="matrix.html#exercises-5" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li>Write a <strong>function</strong> that has two input arguments <strong>A</strong> and <strong>B</strong>
<ul>
<li><strong>A</strong> and <strong>B</strong> are both matrices with the same dimension (same number of rows and columns).</li>
<li>The function returns a matrix <strong>D</strong>.</li>
<li>The <code>[i,j]</code> element of <strong>D</strong> should equal <code>A[i,j]</code> if <code>A[i,j] &lt; B[i,j]</code> and equal <code>B[i,j]</code> if <code>A[i,j] &gt;= B[i,j]</code>.</li>
<li>You can use either a <strong>nested</strong> for loop or <strong>logical indexing</strong>.</li>
</ul></li>
<li>Suppose we define the matrix <code>X</code> as</li>
</ol>
<div class="sourceCode" id="cb598"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb598-1"><a href="matrix.html#cb598-1" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">rbind</span>( <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>), <span class="at">each=</span><span class="dv">3</span>), <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">8</span>,<span class="dv">6</span>), <span class="at">each=</span><span class="dv">3</span>))</span></code></pre></div>
<p>What will be the value of <code>apply(X, 2, sum)[2]</code>?</p>
<ol start="3" style="list-style-type: decimal">
<li>Write a function called <code>PairwiseMedianDiffs</code> that
has <strong>two numeric matrices</strong> <code>A</code> and <code>B</code> as the input arguments. These two input matrices are assumed to have the same dimensions. This function should return a <span class="math inline">\(p \times p\)</span> matrix (where <span class="math inline">\(p\)</span> is the number of columns in <code>A</code>). The <code>[i,j]</code> element of the returned matrix should equal the median of the <span class="math inline">\(i^{th}\)</span> column of <code>A</code> minus the median of the <span class="math inline">\(j^{th}\)</span> column of <code>B</code>.</li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="vectors.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="list.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/nchenderson/IntroductiontoR/edit/master/06-matrix.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/nchenderson/IntroductiontoR/blob/master/06-matrix.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
